<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptids</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- STAGE 1: PRE-LOADER HTML -->
    <div id="pre-loader">
        <div class="bouncing-loader">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <p class="loading-text">Loading...</p>
    </div>

    <!-- STAGE 2: MAIN LOADER HTML -->
    <div id="main-loader">
        <div class="card">
            <div class="card-face card-front">
                <!-- Preloaded image will be inserted here by script.js -->
            </div>
            <div class="card-face card-back">
                <!-- Preloaded image will be inserted here by script.js -->
            </div>
        </div>
        <p>Tap to Continue</p>
    </div>

    <!-- Global Message Container -->
    <div id="globalMessage" class="global-message"></div>

    <!-- Main Content Container for all views -->
    <div id="game-content">

        <!-- AUTH VIEW -->
        <div id="authView" class="view">
            <div class="auth-container">
                <h1>Welcome to Cryptids</h1>
                <p>Sign in to begin your adventure.</p>
                <button class="google-btn" id="google-signin-btn">
                    <svg aria-hidden="true" width="18" height="18" viewBox="0 0 18 18"><path d="M16.51 8.1H9.05v3.55h4.18c-.27 1.13-1.04 2.08-2.13 2.75v2.4c2.32-1.06 3.9-3.34 3.9-5.95 0-.6-.08-1.18-.22-1.75Z" fill="#4285F4"></path><path d="M9.05 16.5c2.08 0 3.84-.68 5.12-1.85l-2.4-1.8c-.7.48-1.58.78-2.72.78-2.08 0-3.85-1.4-4.48-3.3H1.9v2.48C3.23 15.13 5.86 16.5 9.05 16.5Z" fill="#34A853"></path><path d="M4.57 9.98c-.1-.3-.15-.63-.15-.98s.05-.68.15-.98V5.54H1.9C1.16 6.9 1 8.2 1 9.5s.16 2.6.9 3.96l2.67-2.48Z" fill="#FBBC05"></path><path d="M9.05 3.55c1.13 0 2.17.4 2.98 1.2l2.13-2.13C12.9.68 11.13 0 9.05 0 5.86 0 3.23 1.37 1.9 3.75l2.67 2.48C5.2 4.55 6.97 3.55 9.05 3.55Z" fill="#EA4335"></path></svg>
                    <span>Sign in with Google</span>
                </button>
            </div>
        </div>

        <!-- PACK VIEW -->
        <div id="packView" class="view">
            <h1>Open a Pack</h1>
            <div class="currency-display">
                <span id="coinBalance">0</span> Coins
            </div>
            <div class="pack" id="openPackBtn">
                Open Pack (50 Coins)
            </div>
            <div class="cards-container" id="packCardContainer">
                <!-- Opened cards appear here -->
            </div>
        </div>

        <!-- COLLECTION VIEW -->
        <div id="collectionView" class="view">
             <h1>My Collection</h1>
             <div class="cards-container" id="collectionCardContainer">
                <!-- Collection cards appear here, grouped by rarity -->
             </div>
        </div>

        <!-- DECK BUILDER VIEW -->
        <div id="deckBuilderView" class="view">
            <h1>Deck Builder</h1>
            <div class="deck-builder-controls">
                <span>Deck: <span id="currentDeckSize">0</span>/<span id="maxDeckSize">10</span></span>
                <button class="btn" id="saveDeckBtn">Save Deck</button>
            </div>
            <div class="cards-container" id="deckBuilderCardsContainer">
                <!-- Cards available for the deck appear here -->
            </div>
        </div>

        <!-- GAME VIEW -->
        <div id="gameView" class="view">
            <div class="game-info">
                <div class="player-hp">Player HP: <span id="playerHP">100</span></div>
                <div class="turn-counter">Turn: <span id="turnCounter">1/20</span></div>
                <div class="bot-hp">Bot HP: <span id="botHP">100</span></div>
            </div>
            <div class="game-field">
                <div class="bot-area">
                    <h3>Bot's Hand</h3>
                    <div class="bot-hand" id="botHand"></div>
                    <h3>In Play</h3>
                    <div class="in-play-card-container" id="botInPlay"></div>
                </div>
                <div class="player-area">
                    <h3>In Play</h3>
                    <div class="in-play-card-container" id="playerInPlay"></div>
                    <h3>Your Hand</h3>
                    <div class="player-hand" id="playerHand"></div>
                </div>
            </div>
            <div class="game-message" id="gameMessage"></div>
            <div class="game-controls">
                <button class="btn" id="playCardBtn">Play Card</button>
                <button class="btn btn-danger" id="surrenderBtn">Surrender</button>
            </div>
        </div>

        <!-- SETTINGS VIEW -->
        <div id="settingsView" class="view">
            <div class="settings-container">
                <h2>Settings</h2>
                <div class="info-row">Email: <span id="settings-email">...</span></div>
                <div class="info-row">User ID: <span id="settings-userid">...</span></div>
                <a href="account_portal.html" class="btn">Manage Account</a>
                <button class="btn" id="logoutBtn">Logout</button>
                <button class="btn btn-danger" id="deleteAccountBtn">Delete Account</button>
            </div>
        </div>
    </div>

    <!-- BOTTOM NAVIGATION BAR -->
    <div id="bottom-nav">
        <button id="nav-packs" class="nav-btn active">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21.6,6.2l-5-3.2C16.2,2.7,15.6,3,15.3,3.5l-2,4.1c-0.2,0.3-0.5,0.5-0.8,0.5s-0.6-0.2-0.8-0.5l-2-4.1C9.4,3,8.8,2.7,8.4,3L3.4,6.2C3,6.5,2.8,7.1,3.1,7.5l7.5,11.3c0.2,0.3,0.5,0.5,0.9,0.5s0.7-0.2,0.9-0.5l7.5-11.3C20.2,7.1,20,6.5,21.6,6.2z M12,11.5L9.5,6.5l2.5,1.6l2.5-1.6L12,11.5z"/></svg>
            <span>Packs</span>
        </button>
        <button id="nav-collection" class="nav-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20,6H4C2.9,6,2,6.9,2,8v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8C22,6.9,21.1,6,20,6z M4,4h14v1h-14z M17,2H7v1h10z"/></svg>
            <span>Collection</span>
        </button>
        <button id="nav-deck" class="nav-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4,6h16v2H4V6z M4,11h16v2H4V11z M4,16h16v2H4V16z"/></svg>
            <span>Deck</span>
        </button>
        <button id="nav-battle" class="nav-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.8,3.2L18.8,3.2l-4.2,4.2l-1.4-1.4l4.2-4.2c0.4-0.4,1-0.4,1.4,0l0,0C19.2,3.6,19.2,4.2,18.8,4.6z M5.2,15.8l4.2,4.2l1.4-1.4l-4.2-4.2c-0.4-0.4-1-0.4-1.4,0l0,0C4.8,14.8,4.8,15.4,5.2,15.8z M3,18.2L18.2,3l2.8,2.8L5.8,21L3,18.2z"/></svg>
            <span>Battle</span>
        </button>
        <button id="nav-settings" class="nav-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.4,12.6c0.2-0.5,0.2-1,0-1.5l1.7-1.4c0.4-0.3,0.5-0.9,0.2-1.3l-1.5-2.6c-0.2-0.4-0.8-0.6-1.2-0.4l-2,0.8c-0.4-0.3-0.9-0.6-1.4-0.7l-0.3-2.2c-0.1-0.5-0.5-0.8-1-0.8h-3C9,2.5,8.6,2.8,8.5,3.3l-0.3,2.2C7.7,5.6,7.2,5.9,6.8,6.2l-2-0.8c-0.4-0.2-1,0-1.2,0.4L2.1,8.4C1.8,8.8,1.9,9.4,2.3,9.7l1.7,1.4c-0.2,0.5-0.2,1,0,1.5L2.3,14c-0.4,0.3-0.5,0.9-0.2,1.3l1.5,2.6c0.2,0.4,0.8,0.6,1.2,0.4l2,0.8c0.4,0.3,0.9,0.6,1.4,0.7l0.3,2.2c0.1,0.5,0.5,0.8,1,0.8h3c0.5,0,0.9-0.3,1-0.8l0.3-2.2c0.5-0.1,1-0.4,1.4-0.7l2,0.8c0.4,0.2,1,0,1.2-0.4l1.5-2.6c0.2-0.4,0.1-0.9-0.2-1.3L19.4,12.6z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z"/></svg>
            <span>Settings</span>
        </button>
    </div>

    <!-- Game End Modal -->
    <div id="gameEndModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">Game Over</h2>
            <p id="modalMessage">You were defeated!</p>
            <div class="modal-buttons">
                <button id="modalPlayAgain" class="btn">Play Again</button>
                <button id="modalMainMenu" class="btn">Main Menu</button>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div id="deleteAccountModal" class="modal">
        <div class="modal-content">
            <h2>Delete Account</h2>
            <p>Are you sure you want to permanently delete your account? All your cards and progress will be lost.</p>
            <div class="modal-buttons">
                <button id="confirmDeleteBtn" class="btn btn-danger">Yes, Delete</button>
                <button id="cancelDeleteBtn" class="btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Firebase Libraries -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <!-- Main Game Script -->
    <script src="script.js"></script>
</body>
</html>
